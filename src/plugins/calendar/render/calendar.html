{% extends "plugin.html" %}

{% block content %}

<script src="{{static_dir}}/scripts/calendar.min.js" charset="UTF-8"></script>

<div id="calendar" class="calendar" style="
--fc-page-bg-color: #fff;
--fc-border-color: #000;
--fc-today-bg-color: #fff;
--fc-event-bg-color: #000;
--fc-event-color: #fff;
--fc-small-font-size: {{ 0.9 * font_scale }}em;
--fc-title-font-size: {{ 2 * font_scale }}em;
--fc-table-font-size: {{ 1.1 * font_scale }}em;
"></div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const events = {{ events | tojson }};
    const calendarEl = document.getElementById('calendar');

    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',  // Month view only
      events: events,
      now: '{{ current_dt }}',
      timeZone: '{{ timezone }}',
      locale: "{{ plugin_settings.language or 'en' }}",
      firstDay: "{{ plugin_settings.weekStartDay or 0 }}",
      headerToolbar: {
        left: '',
        center: "{{ 'title' if plugin_settings.displayTitle == 'true' else '' }}",
        right: ''
      },
      fixedWeekCount: false,
      weekends:  {{ (plugin_settings.displayWeekends == "true") | tojson }},
    displayEventTime: false,  // Hide event times for readability
      nowIndicator: false,      // Disable moving indicators
      height: '100%',
      dayMaxEvents: 3           // Show max 3 events per day for clarity
  });

    calendar.render();
  });
</script>

{% endblock %}
